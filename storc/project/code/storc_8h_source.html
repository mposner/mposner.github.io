<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>StoRC: storc.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">StoRC
   
   </div>
   <div id="projectbrief">Autonomous Payload Delivery System</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('storc_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">storc.h</div>  </div>
</div>
<div class="contents">
<a href="storc_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***********************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> * StoRC - Search to Rescue Craft</span>
<a name="l00003"></a>00003 <span class="comment"> * MEAM Senior Design 2011-2012</span>
<a name="l00004"></a>00004 <span class="comment"> * </span>
<a name="l00005"></a>00005 <span class="comment"> * Authors:  Michael Posner (CIS, MEAM &#39;12)</span>
<a name="l00006"></a>00006 <span class="comment"> * Timothy Hennelly (ESE &#39;12)</span>
<a name="l00007"></a>00007 <span class="comment"> * Jacob Orloff (MEAM &#39;12)</span>
<a name="l00008"></a>00008 <span class="comment"> * </span>
<a name="l00009"></a>00009 <span class="comment"> * (some code from ArduPilot Mega project, found here:</span>
<a name="l00010"></a>00010 <span class="comment"> * http://code.google.com/p/ardupilot-mega/ )</span>
<a name="l00011"></a>00011 <span class="comment"> * </span>
<a name="l00012"></a>00012 <span class="comment"> * Licensing:</span>
<a name="l00013"></a>00013 <span class="comment"> * </span>
<a name="l00014"></a>00014 <span class="comment"> * This program is free software: you can redistribute it and/or modify </span>
<a name="l00015"></a>00015 <span class="comment"> * it under the terms of the GNU General Public License as published by </span>
<a name="l00016"></a>00016 <span class="comment"> * the Free Software Foundation, either version 3 of the License, or </span>
<a name="l00017"></a>00017 <span class="comment"> * (at your option) any later version. </span>
<a name="l00018"></a>00018 <span class="comment"> * </span>
<a name="l00019"></a>00019 <span class="comment"> * This program is distributed in the hope that it will be useful, </span>
<a name="l00020"></a>00020 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of </span>
<a name="l00021"></a>00021 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the </span>
<a name="l00022"></a>00022 <span class="comment"> * GNU General Public License for more details. </span>
<a name="l00023"></a>00023 <span class="comment"> * </span>
<a name="l00024"></a>00024 <span class="comment"> * You should have received a copy of the GNU General Public License </span>
<a name="l00025"></a>00025 <span class="comment"> * along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00026"></a>00026 <span class="comment"> * </span>
<a name="l00027"></a>00027 <span class="comment"> ***********************************************************/</span>
<a name="l00028"></a>00028 <span class="comment"></span>
<a name="l00029"></a>00029 <span class="comment">/**</span>
<a name="l00030"></a>00030 <span class="comment">*  @file storc.h</span>
<a name="l00031"></a>00031 <span class="comment">*  @brief Main header file, contains global variables, includes, macros, etc.</span>
<a name="l00032"></a>00032 <span class="comment">*  @author Michael Posner (CIS, MEAM &#39;12)</span>
<a name="l00033"></a>00033 <span class="comment">*  @author Timothy Hennelly (ESE &#39;12)</span>
<a name="l00034"></a>00034 <span class="comment">*  @author Jacob Orloff (MEAM &#39;12)</span>
<a name="l00035"></a>00035 <span class="comment">*  </span>
<a name="l00036"></a>00036 <span class="comment">*/</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="comment">//Definitions -------------------------------------------------------</span>
<a name="l00040"></a><a class="code" href="storc_8h.html#a159ca84d25a5487d8e81e4438725df19">00040</a> <span class="preprocessor">#define LOG 0  ///&lt; Easy way to turn logging on (1) and off (0)</span>
<a name="l00041"></a><a class="code" href="storc_8h.html#ac7265d02c447848ab4293684f5e94431">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define TELEMETRY 1  ///&lt; Easy way to turn telemetry on (1) and off (0)</span>
<a name="l00042"></a><a class="code" href="storc_8h.html#aae4f7019dabbfa7398307d486240d88d">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define CONTROLS 1   ///&lt; Easy way to turn controls on (1) and off (0) - if off, Payload release is ON</span>
<a name="l00043"></a><a class="code" href="storc_8h.html#a45bffb8cf8e480743632217c97522fe1">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define NAVIGATION 0 ///&lt; Turn outer loop navigation on (1) and off (0)</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a><a class="code" href="storc_8h.html#a6801baa546c6112d19eb095111d24720">00045</a> <span class="preprocessor">#define GRAVITY 9.81  ///&lt; acceleration due to gravity</span>
<a name="l00046"></a><a class="code" href="storc_8h.html#a66ad2cd1f70525e736b90f4b2c421eac">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define K_DRIFT 0.2564</span>
<a name="l00047"></a><a class="code" href="storc_8h.html#a3ff49c2bbf9ae48bbcb71c82be67facc">00047</a> <span class="preprocessor"></span><span class="preprocessor">#define OFFSET_DRIFT 6.4577</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00049"></a><a class="code" href="storc_8h.html#a2b4f9c3a8b58ecc8e9a6cda26417ba00">00049</a> <span class="preprocessor">#define DEG2RAD(x) (x*0.0174532925)  ///&lt; Macro to convert degrees to radians</span>
<a name="l00050"></a><a class="code" href="storc_8h.html#af93ab8e29004f71549e1cd50278c5473">00050</a> <span class="preprocessor"></span><span class="preprocessor">#define RAD2DEG(x) (x*57.2957795)   ///&lt; Macro to convert radians to degrees</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00052"></a><a class="code" href="storc_8h.html#a6a747f54d74f99f0057be15ad44315eb">00052</a> <span class="preprocessor">#define DELT_M2GPS_LAT(x) (x*105.37407797)  ///&lt; Macro to convert a delta of meters to a delta of GPS decimal*10^7 (latitude)</span>
<a name="l00053"></a><a class="code" href="storc_8h.html#a1b337c93876acd8326c7c3d414b7eb3f">00053</a> <span class="preprocessor"></span><span class="preprocessor">#define DELT_M2GPS_LON(x) (x*74.51564828)  ///&lt; Macro to convert a delta of meters to a delta of GPS decimal*10^7 (longitude)</span>
<a name="l00054"></a><a class="code" href="storc_8h.html#a4ee95c06674415c164d6787f502de243">00054</a> <span class="preprocessor"></span><span class="preprocessor">#define DELT_GPS_LAT2M(x) (x*0.00949)  ///&lt; Macro to convert a delta of GPS decimal*10^7 to a delta of meters (latitude)</span>
<a name="l00055"></a><a class="code" href="storc_8h.html#a885dd5020577658e7bdff0f4f8343736">00055</a> <span class="preprocessor"></span><span class="preprocessor">#define DELT_GPS_LON2M(x) (x*0.01342)  ///&lt; Macro to convert a delta of GPS decimal*10^7 to a delta of meters (longitude)</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00057"></a>00057 <span class="comment">// System and Loop Clocks</span>
<a name="l00058"></a><a class="code" href="storc_8h.html#a95982eccb57c2ae35f8ba3d8f0b05653">00058</a> <span class="preprocessor">#define SYSTEM_CLOCK 16000000  ///&lt; ATmega 2560 clock speed in Hz</span>
<a name="l00059"></a><a class="code" href="storc_8h.html#a9683a7d8139095901da8a77ad48938bf">00059</a> <span class="preprocessor"></span><span class="preprocessor">#define SLOW_LOOP_CLOCK 5  ///&lt; Slow loop clock speed in Hz</span>
<a name="l00060"></a><a class="code" href="storc_8h.html#ae8ba3aeaba4623869f4c0278b26e655d">00060</a> <span class="preprocessor"></span><span class="preprocessor">#define MED_LOOP_CLOCK 25  ///&lt; Medium loop clock speed in Hz</span>
<a name="l00061"></a><a class="code" href="storc_8h.html#abf4cfcf2a33fbe31b052c9ef8449150a">00061</a> <span class="preprocessor"></span><span class="preprocessor">#define FAST_LOOP_CLOCK 50  ///&lt; Fast loop clock speed in Hz</span>
<a name="l00062"></a><a class="code" href="storc_8h.html#addeedd5dea91765aae8498a258b1311c">00062</a> <span class="preprocessor"></span><span class="preprocessor">#define TELEMETRY_CLOCK 5  ///&lt; Telemetry transmit speed in Hz</span>
<a name="l00063"></a><a class="code" href="storc_8h.html#a7600f3f33b2d3b2f911f261767e17a15">00063</a> <span class="preprocessor"></span><span class="preprocessor">#define LOGGING_CLOCK 15  ///&lt; Logging speed in Hz (except for GPS and barometer, which are in the slow loop)</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00065"></a>00065 <span class="comment">// LEDs and Switches</span>
<a name="l00066"></a><a class="code" href="storc_8h.html#afc6d9edfd58550f0c5faa0bfd93c6533">00066</a> <span class="preprocessor">#define A_LED 37  ///&lt; set this pin to output to control LED A on the shield</span>
<a name="l00067"></a><a class="code" href="storc_8h.html#abd697fb9678d42840bd5f7f102f6429d">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define B_LED 36  ///&lt; set this pin to output to control LED B on the shield</span>
<a name="l00068"></a><a class="code" href="storc_8h.html#a9c9b2cd83b2a76c907c6ae0ced34de6e">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define C_LED 35  ///&lt; set this pin to output to control LED C on the shield</span>
<a name="l00069"></a><a class="code" href="storc_8h.html#a6b2520a91cab50d62e3ee45f5ae1336c">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define SLIDE_SWITCH 40  ///&lt; set this pin to input to read the state of the sliding switch on the shield</span>
<a name="l00070"></a><a class="code" href="storc_8h.html#a73492b775cacd42364b2b8bf8eee2751">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define RELAY_SWITCH 47  ///&lt; set this pin to output to control the Relay Switch on the shield</span>
<a name="l00071"></a><a class="code" href="storc_8h.html#a5e245113a26446fd44c4d40db1038397">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define LOGGING_SWITCH 6  ///&lt; switch attached to analog 6 to control whether or not to log</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00073"></a>00073 <span class="comment">// Sensors</span>
<a name="l00074"></a><a class="code" href="storc_8h.html#a34385cbed88a23394bca007232b6682e">00074</a> <span class="preprocessor">#define PITOT_CH 7      ///&lt; The external ADC channel for the pitot probe</span>
<a name="l00075"></a><a class="code" href="storc_8h.html#ad2f2871e4c1d317f57a73a52955bab64">00075</a> <span class="preprocessor"></span><span class="preprocessor">#define PITOT_RATIO 1.0  ///&lt; Conversion between pitot probe voltage and kPa:  once the offset (PITOT_OFFSET) is subtracted, 2V -&gt; 2 kPa</span>
<a name="l00076"></a><a class="code" href="storc_8h.html#aca449f003d6889799fde343cd2f4724a">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define PITOT_OFFSET 2.8   ///&lt; This voltage reading from the pitot probe corresponds to 0 pressure difference between static and dynamic</span>
<a name="l00077"></a><a class="code" href="storc_8h.html#a3bf4402b9e2ae88e4462c3689f5d22b8">00077</a> <span class="preprocessor"></span><span class="preprocessor">#define RHO 1.2  ///&lt; The density of air at sea level</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span>
<a name="l00079"></a>00079 <span class="comment">// RC Channel Definitions</span>
<a name="l00080"></a><a class="code" href="storc_8h.html#a7442864751d0d2d916eab38c8d4afd3d">00080</a> <span class="preprocessor">#define ELEVATOR_CH 0               ///&lt; Elevator Channel definition</span>
<a name="l00081"></a><a class="code" href="storc_8h.html#a5cf5a1a335fd336dc3d1c62a6e81c566">00081</a> <span class="preprocessor"></span><span class="preprocessor">#define RUDDER_CH 1              ///&lt; Rudder Channel definition</span>
<a name="l00082"></a><a class="code" href="storc_8h.html#a35f49ff8ace9c0959be3a689e09bf9db">00082</a> <span class="preprocessor"></span><span class="preprocessor">#define THROTTLE_CH 2           ///&lt; Throttle Channel definition</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span>
<a name="l00084"></a>00084 <span class="comment">// Payload drop</span>
<a name="l00085"></a><a class="code" href="storc_8h.html#acdc7878409a1fb77f950ae38a3c429a8">00085</a> <span class="preprocessor">#define RC4_CH 3           ///&lt; Payload Drop Channel Switch: Ouput #9 on Receiver -  Input #4 on APM</span>
<a name="l00086"></a><a class="code" href="storc_8h.html#a6a52a0625b45484200605378b1da4e94">00086</a> <span class="preprocessor"></span><span class="preprocessor">#define DROP_SERVO 3            ///&lt; Drop servo on APM output #4</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>
<a name="l00088"></a><a class="code" href="storc_8h.html#a761075a139a753615d4529a8eaf965ea">00088</a> <span class="preprocessor">#define RC5_CH 4                ///&lt; RC ch5 definition</span>
<a name="l00089"></a><a class="code" href="storc_8h.html#a34b31159dffd490ce2ff353c0d8d1911">00089</a> <span class="preprocessor"></span><span class="preprocessor">#define RC6_CH 5                ///&lt; RC ch6 definition</span>
<a name="l00090"></a><a class="code" href="storc_8h.html#a26abaf45eaf64bbff7b728d09b7d1604">00090</a> <span class="preprocessor"></span><span class="preprocessor">#define RC7_CH 6               ///&lt; RC ch7 definition</span>
<a name="l00091"></a><a class="code" href="storc_8h.html#a7cd19edf8de3fc4de52e46bafcb799ce">00091</a> <span class="preprocessor"></span><span class="preprocessor">#define RC8_CH 7                ///&lt; RC ch8 definition</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span>
<a name="l00093"></a>00093 <span class="comment">// Time conversions for GPS</span>
<a name="l00094"></a><a class="code" href="storc_8h.html#a3aaee30ddedb3f6675aac341a66e39e2">00094</a> <span class="preprocessor">#define SEC_PER_DAY 86400  ///&lt; Number of seconds in a day</span>
<a name="l00095"></a><a class="code" href="storc_8h.html#a2d540510d5860d7f190d13124956bc57">00095</a> <span class="preprocessor"></span><span class="preprocessor">#define SEC_PER_HOUR 3600  ///&lt; Number of seconds in an hour</span>
<a name="l00096"></a><a class="code" href="storc_8h.html#ac47b302f1b8d2a7a9c035c417247be76">00096</a> <span class="preprocessor"></span><span class="preprocessor">#define SEC_PER_MIN 60  ///&lt; Number of seconds in a minute</span>
<a name="l00097"></a>00097 <span class="preprocessor"></span>
<a name="l00098"></a>00098 <span class="comment">// Logging Definitions (mostly the same convention used by ArduPilot Mega)</span>
<a name="l00099"></a><a class="code" href="storc_8h.html#a07ea2212dc22ff9645bac0b271eba103">00099</a> <span class="preprocessor">#define HEAD_BYTE1 0xA3    ///&lt; Header byte for flash memory writing (Decimal 163)</span>
<a name="l00100"></a><a class="code" href="storc_8h.html#a359466907edd5309a673a2370f9d5d9b">00100</a> <span class="preprocessor"></span><span class="preprocessor">#define HEAD_BYTE2 0x95    ///&lt; Header byte for flash memory writing (Decimal 149)</span>
<a name="l00101"></a><a class="code" href="storc_8h.html#a5126c1e2dc63cec63fc73710e48a9b5d">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define END_BYTE 0xBA      ///&lt; End byte for flash memory writing (Decimal 186)</span>
<a name="l00102"></a>00102 <span class="preprocessor"></span>
<a name="l00103"></a><a class="code" href="storc_8h.html#afb208e520f71bcf7a3267d9ba57b1a04">00103</a> <span class="preprocessor">#define LOG_INDEX_MSG                   0xF0  ///&lt; Index header byte for flash memory writing (for determining log numbering)</span>
<a name="l00104"></a><a class="code" href="storc_8h.html#ad94bcbf354a7cf8a666e81854c29fd6c">00104</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_ATTITUDE_MSG                0x01  ///&lt; Attitude header byte for flash memory writing (used by ArduPilot Mega, here to keep track of what&#39;s used)</span>
<a name="l00105"></a><a class="code" href="storc_8h.html#a2fdfb84c5d7eaa68b3f287740b9a708a">00105</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_GPS_MSG                     0x02  ///&lt; GPS header byte for flash memory writing</span>
<a name="l00106"></a><a class="code" href="storc_8h.html#a591f758330390d622cdff3c47eef4721">00106</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_MODE_MSG                    0X03  ///&lt; Mode header byte for flash memory writing (used by ArduPilot Mega, here to keep track of what&#39;s used)</span>
<a name="l00107"></a><a class="code" href="storc_8h.html#afba7af9b1cf648e227b821a58e8d338e">00107</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_BAROMETER_MSG               0X04  ///&lt; Barometer header byte for flash memory writing</span>
<a name="l00108"></a><a class="code" href="storc_8h.html#a0d73f81a4f7beee3a45b5060670e1fd5">00108</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_IMU_MSG                     0X05  ///&lt; IMU header byte for flash memory writing </span>
<a name="l00109"></a><a class="code" href="storc_8h.html#a115a8a15a43a7f58248b871d6e25fcf4">00109</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_RC_MSG                      0X06  ///&lt; RC header byte for flash memory writing</span>
<a name="l00110"></a><a class="code" href="storc_8h.html#a566ab5e940205de5976ba30f3a10dabc">00110</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_AIRSPEED_MSG                0x07  ///&lt; Airspeed header byte for flash memory writing</span>
<a name="l00111"></a><a class="code" href="storc_8h.html#aab2490425d0d8273184d96b39f83d717">00111</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_MAG_MSG                     0x08  ///&lt; Magnetometer header byte for flash memory writing</span>
<a name="l00112"></a><a class="code" href="storc_8h.html#a780ea47105547ea6aeae90ed57cd8beb">00112</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_CONTROLS_RUDDER_MSG         0x09  ///&lt; Controls roll comp header byte for flash memory writing</span>
<a name="l00113"></a><a class="code" href="storc_8h.html#a4ff9ac184936df5590729a89a3a978ad">00113</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_CONTROLS_ELEVATOR_MSG       0x0A  ///&lt; Controls elevator header byte for flash memory writing</span>
<a name="l00114"></a><a class="code" href="storc_8h.html#a7b57288db57d37acd04942667d981624">00114</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_CONTROLS_THROTTLE_MSG       0x0B  ///&lt; Controls throttle header byte for flash memory writing</span>
<a name="l00115"></a><a class="code" href="storc_8h.html#ad35962c03e693b9acbaf3c365e3d1bfd">00115</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_STATE_MSG                   0x0C  ///&lt; State header byte for flash memory writing</span>
<a name="l00116"></a><a class="code" href="storc_8h.html#ac206e83fa0bfdcbde8e0cc9ca82ebd13">00116</a> <span class="preprocessor"></span><span class="preprocessor">#define LOG_NAVIGATION_MSG              0x0D  ///&lt; Navigation header byte for flash memory writing</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span>
<a name="l00118"></a><a class="code" href="storc_8h.html#a61394015af4a41d08f48980e43c8270f">00118</a> <span class="preprocessor">#define TYPE_AIRSTART_MSG               0x00  ///&lt; Airstart header byte for flash memory writing (used by ArduPilot Mega, here to keep track of what&#39;s used)</span>
<a name="l00119"></a><a class="code" href="storc_8h.html#aec8af4efcac32a096a689a55298cd51a">00119</a> <span class="preprocessor"></span><span class="preprocessor">#define TYPE_GROUNDSTART_MSG            0x01  ///&lt; Groundstart header byte for flash memory writing (used by ArduPilot Mega, here to keep track of what&#39;s used)</span>
<a name="l00120"></a><a class="code" href="storc_8h.html#af59f4e8b32a7d897040070759e28df57">00120</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_NUM_LOGS                    50  ///&lt; Maximum number of logs allowed in flash memory</span>
<a name="l00121"></a>00121 <span class="preprocessor"></span>
<a name="l00122"></a>00122 <span class="comment">//DCM</span>
<a name="l00123"></a><a class="code" href="storc_8h.html#a86bc5084edf342b5cdaed365dbd8fb7e">00123</a> <span class="preprocessor">#define GYRO_INT_TIME  0.02  ///&lt; Gyro integration time for the DCM</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span>
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 <span class="comment">//Global Variables --------------------------------------------------</span>
<a name="l00127"></a>00127 
<a name="l00128"></a>00128 <span class="comment">//Timers</span>
<a name="l00129"></a><a class="code" href="storc_8h.html#aa5d601bc12601e33b6167036b7ad2d24">00129</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="storc_8h.html#aa5d601bc12601e33b6167036b7ad2d24">fast_timer</a>;  <span class="comment">/**&lt; timer for fast loop:  stores how much time has elapsed since</span>
<a name="l00130"></a>00130 <span class="comment">                            the last time this loop was run (in milliseconds) */</span>
<a name="l00131"></a><a class="code" href="storc_8h.html#acd08a5eec0425ddbef7e31333e12d15a">00131</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="storc_8h.html#acd08a5eec0425ddbef7e31333e12d15a">medium_timer</a>;<span class="comment">/**&lt; timer for medium loop:  stores how much time has elapsed since</span>
<a name="l00132"></a>00132 <span class="comment">                            the last time this loop was run (in milliseconds) */</span>
<a name="l00133"></a><a class="code" href="storc_8h.html#add3765d60f7571538e6af8898c86003b">00133</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="storc_8h.html#add3765d60f7571538e6af8898c86003b">slow_timer</a>;  <span class="comment">/**&lt; timer for slow loop:  stores how much time has elapsed since</span>
<a name="l00134"></a>00134 <span class="comment">                            the last time this loop was run (in milliseconds) */</span>
<a name="l00135"></a><a class="code" href="storc_8h.html#abd32ead7c46076edcd6f6cb55e407d7f">00135</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="storc_8h.html#abd32ead7c46076edcd6f6cb55e407d7f">telemetry_timer</a>;  <span class="comment">/**&lt; timer for telemetry:  stores how much time has elapsed since</span>
<a name="l00136"></a>00136 <span class="comment">                            the last time data was transmitted (in milliseconds) */</span>
<a name="l00137"></a><a class="code" href="storc_8h.html#ae3eded80e884912f722c0d8cf0d2c666">00137</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="storc_8h.html#ae3eded80e884912f722c0d8cf0d2c666">logging_timer</a>;  <span class="comment">/**&lt; timer for higher speed logging:  stores how much time has elapsed since</span>
<a name="l00138"></a>00138 <span class="comment">                            the last time data was transmitted (in milliseconds) */</span>
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="comment">// RC Values</span>
<a name="l00141"></a><a class="code" href="storc_8h.html#ac7aad18463e0da2e080b3bf11cf6b1dc">00141</a> <span class="keywordtype">int</span> <a class="code" href="storc_8h.html#ac7aad18463e0da2e080b3bf11cf6b1dc" title="RC Elevator Input.">rc_elevator</a> = 0;       <span class="comment">///&lt; RC Elevator Input</span>
<a name="l00142"></a><a class="code" href="storc_8h.html#acfe6a51893d0a97f021b370da03312db">00142</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="storc_8h.html#acfe6a51893d0a97f021b370da03312db" title="RC Rudder Input.">rc_rudder</a> = 0;         <span class="comment">///&lt; RC Rudder Input</span>
<a name="l00143"></a><a class="code" href="storc_8h.html#a3d6851b64714dca0406b6acb9a9e0867">00143</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="storc_8h.html#a3d6851b64714dca0406b6acb9a9e0867" title="RC Throttle Input.">rc_throttle</a> = 0;       <span class="comment">///&lt; RC Throttle Input</span>
<a name="l00144"></a><a class="code" href="storc_8h.html#ae52df017b138fde620474b3aac767231">00144</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="storc_8h.html#ae52df017b138fde620474b3aac767231" title="RC Payload Drop Input &amp; ELE_control on/off.">rc_4</a> = 0;              <span class="comment">///&lt; RC Payload Drop Input &amp; ELE_control on/off</span>
<a name="l00145"></a><a class="code" href="storc_8h.html#a7fe1031f60be2285c7853174a53d86e6">00145</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="storc_8h.html#a7fe1031f60be2285c7853174a53d86e6" title="RC switch for turning controls on/off.">rc_5</a> = 0;              <span class="comment">///&lt; RC switch for turning controls on/off</span>
<a name="l00146"></a><a class="code" href="storc_8h.html#af62bacc6572a709d8b53dbaa848350bd">00146</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="storc_8h.html#af62bacc6572a709d8b53dbaa848350bd" title="RC knob for adjusting controls gain.">rc_6</a> = 0;              <span class="comment">///&lt; RC knob for adjusting controls gain</span>
<a name="l00147"></a><a class="code" href="storc_8h.html#a70b30eaa53011cda6e531979b2c7ff19">00147</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="storc_8h.html#a70b30eaa53011cda6e531979b2c7ff19" title="RC knob for adjusting controls gain.">rc_7</a> = 0;              <span class="comment">///&lt; RC knob for adjusting controls gain</span>
<a name="l00148"></a><a class="code" href="storc_8h.html#a094619a37f45fe299b023725e64edae1">00148</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="storc_8h.html#a094619a37f45fe299b023725e64edae1">rc_8</a> = 0;
<a name="l00149"></a>00149 
<a name="l00150"></a>00150 <span class="comment">// Drop timer</span>
<a name="l00151"></a><a class="code" href="storc_8h.html#a43548f48bce25bfd07bbf9e0e2d1f57a">00151</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="storc_8h.html#a43548f48bce25bfd07bbf9e0e2d1f57a" title="makes sure the rc input wasnt just a fluke, keeps track of how long the input is high to make sure yo...">drop_timer</a>;  <span class="comment">///&lt; makes sure the rc input wasnt just a fluke, keeps track of how long the input is high to make sure you want to drop</span>
<a name="l00152"></a>00152 <span class="comment"></span>
<a name="l00153"></a>00153 <span class="comment">//Airspeed Values</span>
<a name="l00154"></a><a class="code" href="storc_8h.html#a2a48553c0ca332797b83fc7147f15679">00154</a> <span class="keywordtype">float</span> <a class="code" href="storc_8h.html#a2a48553c0ca332797b83fc7147f15679" title="stores current airspeed reading">airspeed</a>;  <span class="comment">///&lt; stores current airspeed reading</span>
<a name="l00155"></a><a class="code" href="storc_8h.html#a4eccef3b30d91398bd8a29ca4b883e9d">00155</a> <span class="comment"></span><span class="keywordtype">float</span> <a class="code" href="storc_8h.html#a4eccef3b30d91398bd8a29ca4b883e9d" title="stores an offset for zeroing the pitot pressure measurements">pitot_pressure_offset</a>;  <span class="comment">///&lt; stores an offset for zeroing the pitot pressure measurements</span>
<a name="l00156"></a>00156 <span class="comment"></span><span class="comment">//avg wind calcs</span>
<a name="l00157"></a><a class="code" href="storc_8h.html#a07abf3b6e2a9bfc8a580db54c8c87a6c">00157</a> <span class="keywordtype">boolean</span> <a class="code" href="storc_8h.html#a07abf3b6e2a9bfc8a580db54c8c87a6c">get_wind_profile</a> = <span class="keyword">true</span>;
<a name="l00158"></a><a class="code" href="storc_8h.html#a581e898e7395c21ea29bc3a2b1fb06d5">00158</a> <span class="keywordtype">float</span> <a class="code" href="storc_8h.html#a581e898e7395c21ea29bc3a2b1fb06d5" title="running sum of wind samples in North South direction during ascent">sum_wind_ns</a> = 0;  <span class="comment">///&lt; running sum of wind samples in North South direction during ascent</span>
<a name="l00159"></a><a class="code" href="storc_8h.html#a56dabaa2ae630bd9650d023c8e0adb72">00159</a> <span class="comment"></span><span class="keywordtype">float</span> <a class="code" href="storc_8h.html#a56dabaa2ae630bd9650d023c8e0adb72" title="running sum of wind samples in East West direction during ascent">sum_wind_ew</a> = 0;  <span class="comment">///&lt; running sum of wind samples in East West direction during ascent</span>
<a name="l00160"></a><a class="code" href="storc_8h.html#a68f2e96f5336e95d674fe0cdacb3e253">00160</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="storc_8h.html#a68f2e96f5336e95d674fe0cdacb3e253" title="total number of wind samples in NS direction during ascent">total_ns</a> = 0;  <span class="comment">///&lt; total number of wind samples in NS direction during ascent</span>
<a name="l00161"></a><a class="code" href="storc_8h.html#a982b05376b9d6cbd8c59972e78902513">00161</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="storc_8h.html#a982b05376b9d6cbd8c59972e78902513" title="total number of wind samples in EW direction during ascent">total_ew</a> = 0;  <span class="comment">///&lt; total number of wind samples in EW direction during ascent</span>
<a name="l00162"></a><a class="code" href="storc_8h.html#acd3802483bc195abc5c48c74e9223761">00162</a> <span class="comment"></span><span class="keywordtype">float</span> <a class="code" href="storc_8h.html#acd3802483bc195abc5c48c74e9223761" title="average wind in NS direction during ascent">avg_wind_ns</a> = 0;  <span class="comment">///&lt; average wind in NS direction during ascent</span>
<a name="l00163"></a><a class="code" href="storc_8h.html#a89a6ec07d2560ab4a87a1ce7ef3f164b">00163</a> <span class="comment"></span><span class="keywordtype">float</span> <a class="code" href="storc_8h.html#a89a6ec07d2560ab4a87a1ce7ef3f164b" title="average wind in EW direction during ascent">avg_wind_ew</a> = 0;  <span class="comment">///&lt; average wind in EW direction during ascent</span>
<a name="l00164"></a>00164 <span class="comment"></span>
<a name="l00165"></a><a class="code" href="storc_8h.html#af379d19d538c85605a7dddf0ecfd1252">00165</a> <span class="keywordtype">float</span> <a class="code" href="storc_8h.html#af379d19d538c85605a7dddf0ecfd1252">drift_ns</a> = 0.0;
<a name="l00166"></a><a class="code" href="storc_8h.html#abdf5a4cccb85e47d067cd4296182fa8f">00166</a> <span class="keywordtype">float</span> <a class="code" href="storc_8h.html#abdf5a4cccb85e47d067cd4296182fa8f">drift_ew</a> = 0.0;
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 <span class="comment">//Switch/state values</span>
<a name="l00169"></a><a class="code" href="storc_8h.html#aaec6ba6993984fc2ded3efe6a1e2d224">00169</a> <span class="keywordtype">int</span> <a class="code" href="storc_8h.html#aaec6ba6993984fc2ded3efe6a1e2d224" title="state of hardware switch on shield ( either LOW (0) or HIGH (1) )">slide_sw</a> = LOW;  <span class="comment">///&lt; state of hardware switch on shield ( either LOW (0) or HIGH (1) )</span>
<a name="l00170"></a><a class="code" href="storc_8h.html#a93b44c9ef85d047faf95d68a82611677">00170</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="storc_8h.html#a93b44c9ef85d047faf95d68a82611677" title="state of the logging switch on analog 6 (see LOGGING_SWITCH)">logging_sw</a> = 0;  <span class="comment">///&lt; state of the logging switch on analog 6 (see LOGGING_SWITCH)</span>
<a name="l00171"></a><a class="code" href="storc_8h.html#a10b9231b0f5575e2467df3c42d117aba">00171</a> <span class="comment"></span><span class="keywordtype">boolean</span> <a class="code" href="storc_8h.html#a10b9231b0f5575e2467df3c42d117aba" title="state of the drop servo">drop_state</a> = <span class="keyword">false</span>;  <span class="comment">///&lt; state of the drop servo</span>
<a name="l00172"></a>00172 <span class="comment"></span>
<a name="l00173"></a><a class="code" href="storc_8h.html#a75efdde4445e3a8167a05191ccb788da">00173</a> <span class="keywordtype">boolean</span> <a class="code" href="storc_8h.html#a75efdde4445e3a8167a05191ccb788da" title="whether or not to use gps, based on reading the slide_switch at power-on">use_gps</a> = <span class="keyword">false</span>;  <span class="comment">///&lt; whether or not to use gps, based on reading the slide_switch at power-on</span>
<a name="l00174"></a>00174 <span class="comment"></span>
<a name="l00175"></a>00175 <span class="comment">//Acceleration and Gyro</span>
<a name="l00176"></a><a class="code" href="storc_8h.html#aac5141d38d1cbc17d4dd0610a1426354">00176</a> Vector3f <a class="code" href="storc_8h.html#aac5141d38d1cbc17d4dd0610a1426354">accel</a>;
<a name="l00177"></a><a class="code" href="storc_8h.html#a0d1811f25a78ba85a95c6514830b1fff">00177</a> Vector3f <a class="code" href="storc_8h.html#a0d1811f25a78ba85a95c6514830b1fff">gyro</a>;
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 <span class="comment">//GPS starting location</span>
<a name="l00180"></a><a class="code" href="storc_8h.html#a5aa0a8aaed7d1464ffc8174e99c4b151">00180</a> <span class="keywordtype">long</span> <a class="code" href="storc_8h.html#a5aa0a8aaed7d1464ffc8174e99c4b151">gps_start_lat</a> = 0;
<a name="l00181"></a><a class="code" href="storc_8h.html#a0c76265d161a9b98826fda3e18f51ee3">00181</a> <span class="keywordtype">long</span> <a class="code" href="storc_8h.html#a0c76265d161a9b98826fda3e18f51ee3">gps_start_lon</a> = 0;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183 <span class="comment">//Declarations ---------------------------------------------------------</span>
<a name="l00184"></a>00184 
<a name="l00185"></a>00185 <span class="comment">//Serial setup</span>
<a name="l00186"></a>00186 <a class="code" href="storc_8h.html#acc0d5aceb5b7788a75ff29da07229de1" title="setup fast serial port (for FTDI)">FastSerialPort0</a>(Serial);  <span class="comment">///&lt; setup fast serial port (for FTDI)</span>
<a name="l00187"></a>00187 <span class="comment"></span><a class="code" href="storc_8h.html#a73384dcffab1366738dc2131c4fb5f47" title="setup fast serial port (for GPS) to make gps library happy">FastSerialPort1</a>(<a class="code" href="storc_8h.html#a934adcefb2f626c48b3d271e957ff964" title="Initialize GPS (has to be outside of a function for some reason)">Serial1</a>);  <span class="comment">///&lt; setup fast serial port (for GPS) to make gps library happy</span>
<a name="l00188"></a>00188 <span class="comment"></span><a class="code" href="storc_8h.html#a741420a13860923f2148e89d4b6f66c4" title="setup fast serial port for telemetry communication">FastSerialPort3</a>(Serial3);  <span class="comment">///&lt; setup fast serial port for telemetry communication</span>
<a name="l00189"></a>00189 <span class="comment"></span>
<a name="l00190"></a>00190 <span class="keyword">static</span> GPS * gps;  <span class="comment">///&lt; GPS pointer</span>
<a name="l00191"></a><a class="code" href="storc_8h.html#a934adcefb2f626c48b3d271e957ff964">00191</a> <span class="comment"></span>AP_GPS_Auto gps_driver (&amp;<a class="code" href="storc_8h.html#a934adcefb2f626c48b3d271e957ff964" title="Initialize GPS (has to be outside of a function for some reason)">Serial1</a>,&amp;gps);  <span class="comment">///&lt; Initialize GPS (has to be outside of a function for some reason)</span>
<a name="l00192"></a>00192 <span class="comment"></span>
<a name="l00193"></a>00193 <span class="keyword">static</span> AP_ADC_ADS7844 adc; <span class="comment">///&lt; declare an instance of the ADC class</span>
<a name="l00194"></a>00194 <span class="comment"></span>
<a name="l00195"></a><a class="code" href="storc_8h.html#a32486781d8c078736e577cf2ab76313f">00195</a> APM_BMP085_Class <a class="code" href="storc_8h.html#a32486781d8c078736e577cf2ab76313f" title="declare an instance of the Barometer class">barometer</a>;  <span class="comment">///&lt; declare an instance of the Barometer class</span>
<a name="l00196"></a>00196 <span class="comment"></span>
<a name="l00197"></a>00197 AP_IMU_Oilpan <a class="code" href="storc_8h.html#a98361fed9fa0cbb710e8ede8fb1b9298" title="declare an instance of the DCM class">imu</a>(&amp;adc, 0);  <span class="comment">///&lt; declare an instance of the IMU class, set to 0 to disable warm start (warm start = start in air in flight) </span>
<a name="l00198"></a>00198 <span class="comment"></span>
<a name="l00199"></a><a class="code" href="storc_8h.html#a673237fd4f6a1ad73578962737111b7d">00199</a> AP_Compass_HMC5843 <a class="code" href="storc_8h.html#a673237fd4f6a1ad73578962737111b7d" title="declare an instance of the Magnetometer class">compass</a>;  <span class="comment">///&lt; declare an instance of the Magnetometer class</span>
<a name="l00200"></a>00200 <span class="comment"></span>
<a name="l00201"></a><a class="code" href="storc_8h.html#a98361fed9fa0cbb710e8ede8fb1b9298">00201</a> AP_DCM  dcm(&amp;<a class="code" href="storc_8h.html#a98361fed9fa0cbb710e8ede8fb1b9298" title="declare an instance of the DCM class">imu</a>, gps);  <span class="comment">///&lt; declare an instance of the DCM class</span>
<a name="l00202"></a>00202 <span class="comment"></span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="storc_8h.html">storc.h</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Thu Apr 26 2012 16:03:43 for StoRC by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
